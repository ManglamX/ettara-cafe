<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cafe Booking System</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .navbar {
            background-color: #ffffff;
            padding: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #4a2c2a;
        }
        .nav-links {
            display: flex;
            gap: 20px;
        }
        .nav-links a {
            text-decoration: none;
            color: #4a2c2a;
            font-weight: 500;
        }

.cart-button,
.insist-button {
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

.cart-button {
    background-color: #4a2c2a;
    color: white;
}

.insist-button {
    background-color: #d2b48c;
    color: #4a2c2a;
}
    .container {
        max-width: 100vw;
        margin: auto;
        background: #fff;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .container1{
           width: 60vw;
           height: 70vw;
           margin-top: 10vh;
           margin-left: 20vw;
    }
    h1 {
        color: #333;
        text-align: center;
    }
    form {
        display: flex;
        flex-direction: column;
    }
    label {
        margin-top: 10px;
    }
    input, select {
        margin-bottom: 10px;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    button {
        background-color: #5cb85c;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    button:hover {
        background-color: #4cae4c;
    }
    #bookingDetails, #qrcode {
        margin-top: 20px;
        padding: 10px;
        background-color: #e9ecef;
        border-radius: 4px;
    }
    #qrcode {
        display: flex;
        justify-content: center;
    }
    #qrcode svg {
        border: 1px solid #ddd;
        padding: 10px;
        border-radius: 4px;
    }
    #downloadQR {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    #downloadQR:hover {
        background-color: #0056b3;
    }


    .footer {
        background-color: #f5e6d3;
        color: #4a2c2a;
        padding: 50px 0;
        font-family: Arial, sans-serif;
        width: 98vw;
        margin-top: 28px;
        margin-left: -310px;
    }

    .container2 {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
    }
    .footer-content {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    .footer-logo {
        flex: 1;
        max-width: 200px;
    }
    .logo-text {
        margin-top: 10px;
        font-size: 24px;
    }
    .footer-links {
        flex: 2;
        display: flex;
        justify-content: space-between;
    }
    .footer-section {
        margin-right: 30px;
    }
    .footer-section h3 {
        margin-bottom: 15px;
        font-size: 18px;
    }
    .footer-section ul {
        list-style-type: none;
        padding: 0;
    }
    .footer-section ul li {
        margin-bottom: 10px;
    }
    .footer-section a {
        color: #4a2c2a;
        text-decoration: none;
    }
    .footer-cta {
        flex: 1;
        text-align: right;
    }
    .order-btn {
        display: block;
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: none;
        border-radius: 5px;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }
    .zomato {
        background-color: #cb202d;
    }
    .swiggy {
        background-color: #fc8019;
    }
    .open-hours {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin-top: 20px;
    }
    .hours-icon {
        width: 50px;
        height: 50px;
        border: 2px solid #4a2c2a;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 10px;
        font-weight: bold;
    }
    .footer-bottom {
        margin-top: 30px;
        text-align: center;
        border-top: 1px solid #4a2c2a;
        padding-top: 20px;
    }
    .social-icons {
        margin-bottom: 15px;
    }
    .social-icon {
        font-size: 20px;
        margin: 0 10px;
        color: #4a2c2a;
    }
    @media (max-width: 768px) {
        .footer-content {
            flex-direction: column;
        }
        .footer-logo, .footer-links, .footer-cta {
            flex: 1 1 100%;
            max-width: 100%;
            text-align: center;
            margin-bottom: 30px;
        }
        .footer-links {
            flex-direction: column;
        }
        .footer-section {
            margin-right: 0;
            margin-bottom: 20px;
        }
    }
    </style>
</head>
<body>
   
    <nav class="navbar">
        <!-- <div class="container"> -->
            <div class="nav-content">
                <div class="logo">ETTāRRA</div>
                <div class="nav-links">
                    <a href="main.html">Home</a>
                    <a href="#">Admin</a>
                    <a href="#event-card">Event Card</a>
                    <a href="#">Contact us</a>
                </div>
            </div>
        </div>
    </nav>
<div class="container01">
    <div class="container1">
        <h1>Cafe Booking System</h1>
        <form id="bookingForm">
            <label for="name">Name:</label>
            <input type="text" id="name" required>

            <label for="email">Email:</label>
            <input type="email" id="email" required>

            <label for="contact">Contact No:</label>
            <input type="tel" id="contact" required>

            <label for="age">Age:</label>
            <input type="number" id="age" required min="1">

            <label for="tables">Number of Tables:</label>
            <select id="tables" required>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>

            <button type="submit">Book Seat</button>
        </form>

        <div id="bookingDetails"></div>
        <div id="qrcode"></div>
        <button id="downloadQR" style="display: none;">Download QR Code</button>


        <footer class="footer">
            <div class="container2">
                <div class="footer-content">
                    <div class="footer-logo">
                        <svg width="100" height="100" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="40" fill="#1a2b4a"/>
                            <path d="M30 50 Q 50 20, 70 50 Q 60 70, 50 60 Q 40 70, 30 50" fill="none" stroke="white" stroke-width="2"/>
                        </svg>
                        <h2 class="logo-text">ETTāRRA</h2>
                    </div>
                    <div class="footer-links">
                        <div class="footer-section">
                            <h3>Quick Links</h3>
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">Ettarra Insists</a></li>
                                <li><a href="#">Brew Stories</a></li>
                                <li><a href="#">Contact Us</a></li>
                            </ul>
                        </div>
                        <div class="footer-section">
                            <h3>Address</h3>
                            <p>Juhu Residency Boutique Hotel, Mumbai, Maharashtra 400049</p>
                            <p><i class="fas fa-map-marker-alt"></i> Juhu, Mumbai</p>
                        </div>
                        <div class="footer-section">
                            <h3>Contact</h3>
                            <p><i class="fas fa-phone"></i> +91 98256 03145</p>
                            <p><i class="fas fa-envelope"></i> care@ettarracoffee.in</p>
                        </div>
                    </div>
                    <div class="footer-cta">
                        <button class="order-btn zomato">
                            <i class="fas fa-utensils"></i> Order On Zomato
                        </button>
                        <button class="order-btn swiggy">
                            <i class="fas fa-bicycle"></i> Order On Swiggy
                        </button>
                        <div class="open-hours">
                            <span>Open For Dine-In</span>
                            <div class="hours-icon">24/7</div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-spotify"></i></a>
                    </div>
                    <p>&copy; Ettarra Coffee House 2024. Webworks by Infobahn</p>
                    <p>Registered name: Bunts Hotels Private Limited</p>
                </div>
            </div>
        </footer>
    </div>
</div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCSsatonj0k4Bme9HQAmH7ce2BUNgV25Bg",
            authDomain: "ettara-coffee.firebaseapp.com",
            databaseURL: "https://ettara-coffee-default-rtdb.firebaseio.com",
            projectId: "ettara-coffee",
            storageBucket: "ettara-coffee.appspot.com",
            messagingSenderId: "936196066889",
            appId: "1:936196066889:web:526891abbf12edc58f3998",
            measurementId: "G-YW6KXHHN3G"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const contact = document.getElementById('contact').value;
            const age = parseInt(document.getElementById('age').value);
            const tables = parseInt(document.getElementById('tables').value);

            const bookingData = {
                name: name,
                email: email,
                contact: contact,
                age: age,
                tables: tables,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };

            db.collection('bookings').add(bookingData)
                .then((docRef) => {
                    console.log('Booking added successfully with ID: ', docRef.id);
                    displayBookingDetails(docRef.id, bookingData);
                })
                .catch((error) => {
                    console.error('Error adding booking: ', error);
                });
        });

        function displayBookingDetails(bookingId, bookingData) {
            const bookingDetails = document.getElementById('bookingDetails');
            bookingDetails.innerHTML = `
                <h2>Booking Confirmed!</h2>
                <p><strong>Booking ID:</strong> ${bookingId}</p>
                <p><strong>Name:</strong> ${bookingData.name}</p>
                <p><strong>Email:</strong> ${bookingData.email}</p>
                <p><strong>Contact:</strong> ${bookingData.contact}</p>
                <p><strong>Age:</strong> ${bookingData.age}</p>
                <p><strong>Tables:</strong> ${bookingData.tables}</p>
            `;

            // Generate QR Code
            const qrCodeData = JSON.stringify({...bookingData, id: bookingId});
            const qr = qrcode(0, 'M');
            qr.addData(qrCodeData);
            qr.make();
            
            const qrCodeDiv = document.getElementById('qrcode');
            qrCodeDiv.innerHTML = qr.createSvgTag({cellSize: 8, margin: 4});
            
            // Show download button
            const downloadButton = document.getElementById('downloadQR');
            downloadButton.style.display = 'block';
            
            // Add click event listener to download button
            downloadButton.onclick = function() {
                const svgElement = qrCodeDiv.querySelector('svg');
                const svgData = new XMLSerializer().serializeToString(svgElement);
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    const pngFile = canvas.toDataURL('image/png');
                    const downloadLink = document.createElement('a');
                    downloadLink.download = booking_qr_${bookingId}.png;
                    downloadLink.href = pngFile;
                    downloadLink.click();
                };
                img.src = 'data:image/svg+xml;base64,' + btoa(svgData);
            };
        }
    </script>
</body>
</html>